// Generated by CoffeeScript 1.3.3
(function() {
  var UglifyMinifier, ast_mangle, ast_squeeze, gen_code, parse, sysPath, uglify, _ref;

  sysPath = require('path');

  uglify = require('uglify-js');

  _ref = uglify.uglify, gen_code = _ref.gen_code, ast_squeeze = _ref.ast_squeeze, ast_mangle = _ref.ast_mangle;

  parse = uglify.parser.parse;

  module.exports = UglifyMinifier = (function() {

    UglifyMinifier.prototype.brunchPlugin = true;

    UglifyMinifier.prototype.type = 'javascript';

    function UglifyMinifier(config) {
      this.config = config;
      null;
    }

    UglifyMinifier.prototype.minify = function(data, path, callback) {
      var error, minified;
      try {
        minified = gen_code(ast_squeeze(ast_mangle(parse(data))));
      } catch (err) {
        error = "JS minify failed on " + path + ": " + err;
      }
      return process.nextTick(function() {
        return callback(error, minified || data);
      });
    };

    return UglifyMinifier;

  })();

}).call(this);
